"use strict";(self.webpackChunkguide=self.webpackChunkguide||[]).push([[505],{3642:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var i=n(4848),s=n(8453);const a={sidebar_position:4},o="Best Practices",r={id:"best-practice/index",title:"Best Practices",description:"How to Test Private Functions",source:"@site/docs/best-practice/index.md",sourceDirName:"best-practice",slug:"/best-practice/",permalink:"/embeded-testing-guide/docs/best-practice/",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/best-practice/index.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"(Reference) Setting Up a Linux Environment Using WSL2",permalink:"/embeded-testing-guide/docs/setup/wsl"},next:{title:"References",permalink:"/embeded-testing-guide/docs/reference/"}},c={},d=[{value:"How to Test Private Functions",id:"how-to-test-private-functions",level:2},{value:"Is TDD Mandatory?",id:"is-tdd-mandatory",level:2},{value:"Test Coverage",id:"test-coverage",level:2},{value:"Missing Expected Value Checks",id:"missing-expected-value-checks",level:3}];function l(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"best-practices",children:"Best Practices"})}),"\n",(0,i.jsx)(t.h2,{id:"how-to-test-private-functions",children:"How to Test Private Functions"}),"\n",(0,i.jsx)(t.p,{children:"You do not need to test private functions (in C, these would be static functions) that cannot be called from other files. It is an anti-pattern to change a private function to public or use any kind of workaround just to make it testable from the test code."}),"\n",(0,i.jsx)(t.p,{children:"Private functions are called within public functions, so by writing tests for the public functions, the private functions will naturally be tested as well. If you feel the need to call a private function directly in your tests, it may indicate that your structure is too opaque and could benefit from reworking. Alternatively, you may be trying to test implementation details rather than behavior or specifications. Testing implementation details leads to brittle tests and can reduce the maintainability of the test code, so it\u2019s best to avoid it."}),"\n",(0,i.jsx)(t.h2,{id:"is-tdd-mandatory",children:"Is TDD Mandatory?"}),"\n",(0,i.jsx)(t.p,{children:"It\u2019s not necessary to always follow TDD (Test-Driven Development), but I believe that starting with test code before implementation helps maintain a more testable interface, compared to implementing first and then writing test code."}),"\n",(0,i.jsx)(t.h2,{id:"test-coverage",children:"Test Coverage"}),"\n",(0,i.jsx)(t.p,{children:"There is no need to aim for 100% coverage. Coverage is just a metric that calculates how many lines of product code are executed during tests."}),"\n",(0,i.jsx)(t.p,{children:"For example, the following test code only verifies one side of a conditional branch."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-c",metastring:'title="Test Code"',children:"TEST(getAbsSuite, CanCalculateAbsoluteValue) {\n    int x = 3;\n    int y = -2;\n    EXPECT_EQ(5, getAbs(x, y));\n}\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-c",metastring:'title="Product code"',children:"int getAbs(int x, int y) {\n    if (x >= y) {\n      return (x - y);\n    } else {\n      // highlight-next-line\n      return (y - x); // This branch is not being tested\n    }\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"Simply changing the if statement in the product code to a ternary operator will increase the coverage. However, what is being tested is still the same as with the if statement."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-c",metastring:'title="Product code"',children:"int getAbs(int x, int y) {\n    return (x - y) >= 0 ? (x - y) : (y-x);\n}\n"})}),"\n",(0,i.jsx)(t.h3,{id:"missing-expected-value-checks",children:"Missing Expected Value Checks"}),"\n",(0,i.jsx)(t.p,{children:"If a team sets a coverage standard like 80%, some members might increase coverage without performing expected value checks."}),"\n",(0,i.jsxs)(t.p,{children:["In the following test code, no expected value checks (confirmation via ",(0,i.jsx)(t.code,{children:"EXPECT_EQ"}),") are included, but since the product code is executed, it still counts toward coverage."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-c",metastring:'title="Test Code"',children:"TEST(getAbsSuite, CanCalculateAbsoluteValue) {\n    getAbs(3, -2);\n    getAbs(1, 5);\n}\n"})})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var i=n(6540);const s={},a=i.createContext(s);function o(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);