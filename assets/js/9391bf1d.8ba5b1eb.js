"use strict";(self.webpackChunkguide=self.webpackChunkguide||[]).push([[138],{2505:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>d});var o=n(4848),r=n(8453);const c={sidebar_position:6},i="Replacing with Mocks",a={id:"guide/methods/mock",title:"Replacing with Mocks",description:"Mocks are a type of double that replaces DOC. Unlike dummies or spies, you don't need to create mocks yourself; they are provided by testing frameworks. If you're using GoogleTest, you can take advantage of GoogleMock.",source:"@site/docs/guide/methods/mock.md",sourceDirName:"guide/methods",slug:"/guide/methods/mock",permalink:"/embeded-testing-guide/docs/guide/methods/mock",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/guide/methods/mock.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Replacing with Function Pointers",permalink:"/embeded-testing-guide/docs/guide/methods/functional-pointer"},next:{title:"Best Practices",permalink:"/embeded-testing-guide/docs/guide/bestPractice"}},s={},d=[];function l(e){const t={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"replacing-with-mocks",children:"Replacing with Mocks"})}),"\n",(0,o.jsx)(t.p,{children:"Mocks are a type of double that replaces DOC. Unlike dummies or spies, you don't need to create mocks yourself; they are provided by testing frameworks. If you're using GoogleTest, you can take advantage of GoogleMock."}),"\n",(0,o.jsx)(t.p,{children:"Mocks differ from dummies that are used just for linking. They allow you to specify the expected behavior."}),"\n",(0,o.jsxs)(t.p,{children:["Below is the code for controlling a robot arm in ",(0,o.jsx)(t.code,{children:"armCtrl.c"}),". The functions ",(0,o.jsx)(t.code,{children:"rotate()"})," and ",(0,o.jsx)(t.code,{children:"grab()"})," used within ",(0,o.jsx)(t.code,{children:"armCtrl.c"})," are collaborators. These functions handle actual robot operations and cannot be used on the PC during testing."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-c",metastring:'title="Product Code armCtrl.h"',children:"#ifndef ARMCTRL_H\n#define ARMCTRL_H\n\nvoid rotate(int angle);\nvoid grab();\nvoid catchObject();\n\n#endif // ARMCTRL_H\n"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-c",metastring:'title="Product Code armCtrl.c"',children:'#include "armCtrl.h"\n#include "move.h"\n\nvoid catchObject() {\n    rotate(90);\n    grab();\n}\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Suppose you want to test that within ",(0,o.jsx)(t.code,{children:"catchObject()"}),", the ",(0,o.jsx)(t.code,{children:"rotate()"})," function is called once with an argument of 90, and the ",(0,o.jsx)(t.code,{children:"grab()"})," function is called. By using mocks, you can test the interaction between these functions."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-c",metastring:'title="testArmCtrl.c"',children:'#include <gtest/gtest.h>\n#include <gmock/gmock.h>\nextern "C" {\n    #include "armCtrl.h"\n}\n\n// Definition of the mock class\nclass MockArmController {\npublic:\n    MOCK_METHOD(void, rotate, (int angle), ());\n    MOCK_METHOD(void, grab, (), ());\n};\n\nvoid mockRotate(int angle) {\n    MockArmController* mock = testing::Test::GetInstance()->GetMock<MockArmController>();\n    mock->rotate(angle);\n}\n\nvoid mockGrab() {\n    MockArmController* mock = testing::Test::GetInstance()->GetMock<MockArmController>();\n    mock->grab();\n}\n\nTEST(ArmControllerTest, ArmRotatesAndGrabsObject) {\n    MockArmController mockController;\n    armCtrl::rotate = mockRotate;\n    armCtrl::grab = mockGrab;\n\n    // Expect that rotate() and grab() will be called within catchObject()\n    EXPECT_CALL(mockController, rotate(90)).Times(1);\n    EXPECT_CALL(mockController, grab()).Times(1);\n\n    catchObject();\n}\n'})}),"\n",(0,o.jsx)(t.p,{children:"Mocks are powerful, but overuse can lead to test code that focuses on implementation details rather than the specifications or behavior. This can negatively affect the maintainability of the test code, so caution is needed."})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var o=n(6540);const r={},c=o.createContext(r);function i(e){const t=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(c.Provider,{value:t},e.children)}}}]);