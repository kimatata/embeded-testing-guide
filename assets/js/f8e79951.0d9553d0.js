"use strict";(self.webpackChunkguide=self.webpackChunkguide||[]).push([[581],{2067:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>s,contentTitle:()=>c,default:()=>u,frontMatter:()=>d,metadata:()=>r,toc:()=>l});var n=i(4848),o=i(8453);const d={sidebar_position:3},c="Replacing with Compile Switches",r={id:"guide/methods/compile-switch",title:"Replacing with Compile Switches",description:"This method involves branching in the product code with compile switches to call functions appropriate for each environment, depending on microcontroller or hardware dependencies. However, this approach modifies the product code specifically for testing, which can make the code more complex.",source:"@site/docs/guide/methods/compile-switch.md",sourceDirName:"guide/methods",slug:"/guide/methods/compile-switch",permalink:"/embeded-testing-guide/docs/guide/methods/compile-switch",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/guide/methods/compile-switch.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Extracting Logic",permalink:"/embeded-testing-guide/docs/guide/methods/extract"},next:{title:"Replacing with the Linker",permalink:"/embeded-testing-guide/docs/guide/methods/link"}},s={},l=[];function a(e){const t={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"replacing-with-compile-switches",children:"Replacing with Compile Switches"})}),"\n",(0,n.jsx)(t.p,{children:"This method involves branching in the product code with compile switches to call functions appropriate for each environment, depending on microcontroller or hardware dependencies. However, this approach modifies the product code specifically for testing, which can make the code more complex."}),"\n",(0,n.jsx)(t.p,{children:"It is recommended to avoid this method as it pollutes the product code."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",metastring:'title="Product Code led.c"',children:"#include ledCtrl.h\n\nvoid turnOnRedLED(void) {\n#if REAL_BOARD\n    LedCtrl_LedON(3);\n#else\n    VirtualLedCtrl_LedON(3);\n#endif\n}\n"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",metastring:'title="ledCtrl.c for Product Code "',children:"static uint8_t led_value;\n\n// Set value in register\nvoid LedCtrl_LedON(uint8_t ledNo) {\n    led_value = led_value | (1 << n);\n    LED_RESISTER = led_value;\n}\n"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",metastring:'title="ledCtrl.c for Test Code"',children:"static uint8_t led_value;\n\nvoid VirtualLedCtrl_LedON(uint8_t ledNo) {\n    led_value = led_value | (1 << n);\n}\n\n// Allow test code to call led_value and verify the results\nuint8_t void VirtualLedCtrl_GetLedValue(void) {\n    return led_value;\n}\n"})})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},8453:(e,t,i)=>{i.d(t,{R:()=>c,x:()=>r});var n=i(6540);const o={},d=n.createContext(o);function c(e){const t=n.useContext(d);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),n.createElement(d.Provider,{value:t},e.children)}}}]);