---
sidebar_position: 2
---

import colaborator from "./img/colaborator.png";

# 依存関係

組み込み製品のコードに対してテストを単体テストを適用しようとしても、
ハードウェアやマイコン動作のための依存関係（コラボレータ）が存在し、テストできない。
それを回避するため、テスト対象コードが依存している部分を切り離したりテストダブルで置き換える必要がある。

<img src={colaborator} alt="コラボレータ" width="500" />

||略|説明|
|-|-|-|
|CUT|Code Under Test|テスト対象のコード|
|DOC|Depended on Compenents|テスト対象のコードが依存しているコード|
|TDOC|Transitively DOC|推移的にテスト対象のコードが依存しているコード|

CUTはテストしたいロジック。DOCにはハードウェア依存のコード存在している。Zeus環境の`REG32`, `after_print()`が使われているイメージ。
CUTのロジックをテストしたいが、DOCがハードウェアに依存しているため、テストコードをビルドできない。

### （参考）ダブルとは

:::info

テストダブルはフェイクやスパイ、ダミー、モックといったものをすべて含んだ言葉。
- ダミー: リンクを通すためだけのもの
- スタブ: 固定値を返す
- モック: 他の関数をコールする際に、関数名、パラメータ、呼ぶ順番をチェックする。テスティングフレームワークによって用意される
- スパイ: 自作のモック

:::
